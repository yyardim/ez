define("datacontext",["jquery","underscore","ko","model","model.mapper","dataservice","config","utils","datacontext.speaker-sessions"],function(n,t,i,r,u,f,e,o){var s=e.logger,p=function(){return e.currentUser().id()},a=function(n,i,r,u){if(i){var f=o.mapMemoToArray(n);r&&(f=t.filter(f,function(n){return r.predicate(r,n)}));u&&f.sort(u);i(f)}},y=function(n,i,r,u,f,e){return i=t.reduce(n,function(n,t){var r=u.getDtoId(t),f=i[r];return n[r]=u.fromDto(t,f),n},{}),a(i,r,f,e),i},v=function(t,r,u,f){var h={},c=function(n){var t=r.getDtoId(n),i=h[t];return h[t]=r.fromDto(n,i),h[t]},l=function(n){h[n.id()]=n},v=function(n){delete h[n]},p=function(n){return!!n&&!!h[n]?h[n]:u},w=function(){return o.mapMemoToArray(h)},b=function(i){return n.Deferred(function(n){var u=i&&i.results,f=i&&i.sortFunction,c=i&&i.filter,l=i&&i.forceRefresh,v=i&&i.param,p=i&&i.getFunctionOverride;t=p||t;!l&&h&&o.hasProperties(h)?(a(h,u,c,f),n.resolve(u)):t({success:function(t){h=y(t,h,u,r,c,f);n.resolve(u)},error:function(){s.error(e.toasts.errorGettingData);n.reject()}},v)}).promise()},k=function(t,r){var u=i.toJSON(t);return n.Deferred(function(n){if(!f){s.error("updateData method not implemented");r&&r.error&&r.error();n.reject();return}f({success:function(i){s.success(e.toasts.savedData);t.dirtyFlag().reset();r&&r.success&&r.success();n.resolve(i)},error:function(t){s.error(e.toasts.errorSavingData);r&&r.error&&r.error();n.reject(t);return}},u)}).promise()};return{mapDtoToContext:c,add:l,getAllLocal:w,getLocalById:p,getData:b,removeById:v,updateData:k}},h=new v(f.ez.getEzs,u.ez,r.Ez.Nullo),c=new v(f.person.getPersons,u.person,r.Person.Nullo),l;return h.getFullEventById=function(t,i,r){return n.Deferred(function(n){var u=h.getLocalById(t);u.isNullo||u.isBrief()||r?f.event.getEvent({success:function(t){u=h.mapDtoToContext(t);u.isBrief(!1);i&&i.success&&i.success(u);n.resolve(t)},error:function(r){s.error("oops! could not retrieve session "+t);i&&i.error&&i.error(r);n.reject(r)}},t):(i&&i.success&&i.success(u),n.resolve(u))}).promise()},c.getFullPersonById=function(t,i,r){return n.Deferred(function(n){var u=c.getLocalById(t);u.isNullo||u.isBrief()||r?f.person.getPerson({success:function(t){u=c.mapDtoToContext(t);u.isBrief(!1);i.success(u);n.resolve(t)},error:function(r){s.error("oops! could not retrieve person "+t);i&&i.error&&i.error(r);n.reject(r)}},t):(i.success(u),n.resolve(u))}).promise()},l={persons:c,ezs:h},r.setDataContext(l),l});
/*
//# sourceMappingURL=datacontext.min.js.map
*/