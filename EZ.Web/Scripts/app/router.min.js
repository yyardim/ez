define("router",["jquery","underscore","sammy","presenter","config","route-mediator","store"],function(n,t,i,r,u,f,e){var h="",c="",s=!1,w=u.logger,l="",b=u.window,o=new i.Application(function(){i.Title&&(this.use(i.Title),this.setTitle(u.title))}),k=function(){b.history.back()},a=function(n){o.setLocation(n)},d=function(n){if(n.routes){t.each(n.routes,function(t){v({route:t.route,title:t.title,callback:t.callback,view:n.view,group:t.group,isDefault:!!t.isDefault})});return}v(n)},g=function(){o.before(/.*/,function(){var t=this,n=f.canLeave();return s||n.val?(s=!1,h=t.app.getLocation()):(s=!0,w.warning(n.message),t.app.setLocation(h)),n.val})},v=function(n){if(!n.callback)throw Error("callback must be specified.");n.isDefault&&(c=n.route,y(n,"/"));y(n)},y=function(t,i){var f=i||t.route;o.get(f,function(i){e.save(u.stateKeys.lastView,i.path);t.callback(i.params);n(".view").hide();r.transitionTo(n(t.view),t.route,t.group);this.title&&this.title(t.title)})},p=function(n){return n&&n.indexOf("/#")!=-1?n:null},nt=function(){var n=e.fetch(u.stateKeys.lastView),t=o.getLocation();l=p(t)||p(n)||c;o.run();g();a(l)};return{navigateBack:k,navigateTo:a,register:d,run:nt}});
/*
//# sourceMappingURL=router.min.js.map
*/